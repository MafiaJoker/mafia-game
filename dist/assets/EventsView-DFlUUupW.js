import{r as x,a as te,o as ne,c as S,b as $,w as t,d as e,E as le,e as O,f as he,g as Ee,h as $e,i as B,j as p,k as j,l as L,m as ae,_ as R,n as T,p as H,F as P,q as J,s as l,t as g,u as A,v as z,x as C,y as K,z as se,A as oe,B as q,C as Ve,D as Q,G as we,H as de,I as ke,J as ie,K as ue,L as F,M as Te,N as Ce,O as W,P as re,Q as ce,R as me,S as De,T as Ue,U as Le,V as _e,W as xe,X as Me,Y as Se,Z as Be}from"./index-DopsCuGS.js";import{u as ve,_ as Re}from"./CreateTableDialog-fUK7uFNu.js";import{a as fe}from"./el-radio-DW38t20Y.js";/* empty css                  */const ze={__name:"CreateEventForm",emits:["event-created"],setup(m,{emit:w}){const y=w,b=ve(),V=x(),E=x(!1),a=te({name:"",description:"",date:new Date().toISOString().split("T")[0],language:"ru",category:"funky",status:"planned"}),h={name:[{required:!0,message:"Введите название мероприятия",trigger:"blur"}],date:[{required:!0,message:"Выберите дату",trigger:"change"}],language:[{required:!0,message:"Выберите язык",trigger:"change"}]},u=()=>{const r=b.events.filter(D=>D.category==="funky");a.name=`Игровой вечер #${r.length+1}`;const n=new Date,s=n.getMonth(),d=n.getFullYear(),i=b.events.filter(D=>{if(D.category!=="funky")return!1;const U=new Date(D.date);return U.getMonth()===s&&U.getFullYear()===d}).length+1,k=["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"];a.description=`Игровой вечер #${i} за ${k[s]} ${d} года.`},f=async()=>{if(V.value)try{await V.value.validate(),E.value=!0;const r={...a},n=await b.createEvent(r);L.success("Мероприятие успешно создано!"),y("event-created",n),V.value.resetFields(),u()}catch(r){console.error("Ошибка создания мероприятия:",r),L.error("Ошибка при создании мероприятия")}finally{E.value=!1}};return ne(async()=>{u()}),(r,n)=>{const s=O,d=le,_=he,i=$e,k=Ee,D=B,U=ae;return $(),S(U,{ref_key:"formRef",ref:V,model:a,rules:h,"label-width":"140px",onSubmit:j(f,["prevent"])},{default:t(()=>[e(d,{label:"Название",prop:"name"},{default:t(()=>[e(s,{modelValue:a.name,"onUpdate:modelValue":n[0]||(n[0]=v=>a.name=v),placeholder:"Игровой вечер #1"},null,8,["modelValue"])]),_:1}),e(d,{label:"Описание",prop:"description"},{default:t(()=>[e(s,{modelValue:a.description,"onUpdate:modelValue":n[1]||(n[1]=v=>a.description=v),type:"textarea",rows:3,placeholder:"Описание мероприятия"},null,8,["modelValue"])]),_:1}),e(d,{label:"Дата",prop:"date"},{default:t(()=>[e(_,{modelValue:a.date,"onUpdate:modelValue":n[2]||(n[2]=v=>a.date=v),type:"date",placeholder:"Выберите дату",format:"DD.MM.YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(d,{label:"Язык",prop:"language"},{default:t(()=>[e(k,{modelValue:a.language,"onUpdate:modelValue":n[3]||(n[3]=v=>a.language=v),style:{width:"100%"}},{default:t(()=>[e(i,{label:"Русский",value:"ru"}),e(i,{label:"English",value:"en"}),e(i,{label:"Հայերեն",value:"am"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"Категория",prop:"category"},{default:t(()=>[e(k,{modelValue:a.category,"onUpdate:modelValue":n[4]||(n[4]=v=>a.category=v),style:{width:"100%"}},{default:t(()=>[e(i,{label:"Фанки",value:"funky"}),e(i,{label:"Миникап",value:"minicap"}),e(i,{label:"Турнир",value:"tournament"}),e(i,{label:"Благотворительный турнир",value:"charity_tournament"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"Статус",prop:"status"},{default:t(()=>[e(k,{modelValue:a.status,"onUpdate:modelValue":n[5]||(n[5]=v=>a.status=v),style:{width:"100%"}},{default:t(()=>[e(i,{label:"В планах",value:"planned"}),e(i,{label:"Активно",value:"active"}),e(i,{label:"Завершено",value:"completed"})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(D,{type:"primary",onClick:f,loading:E.value,style:{width:"100%"}},{default:t(()=>n[6]||(n[6]=[p(" Создать мероприятие ")])),_:1,__:[6]},8,["loading"])]),_:1})]),_:1},8,["model"])}}},Ne={class:"events-list"},Ie={key:0,class:"empty-state"},Ye={key:1,class:"events-container"},je=["onClick"],Fe={class:"event-content"},Ae={class:"event-header"},qe={class:"event-title"},Ge={class:"event-description"},Oe={class:"event-footer"},He={class:"event-info"},Pe={class:"event-date"},Je={class:"event-actions"},Ke={__name:"EventsList",props:{events:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["viewEvent","deleteEvent"],setup(m){const w=u=>({ru:"RU",en:"EN",am:"AM"})[u]||"RU",y=u=>({ru:"info",en:"success",am:"warning"})[u]||"info",b=u=>({planned:"В планах",active:"Активно",completed:"Завершено"})[u]||"Неизвестно",V=u=>({planned:"info",active:"success",completed:"info"})[u]||"info",E=u=>({funky:"Фанки",minicap:"Миникап",tournament:"Турнир",charity_tournament:"Благотворительный"})[u]||"Фанки",a=u=>{const f=Math.abs(u)%100;if(f>=5&&f<=20)return"столов";const r=f%10;return r===1?"стол":r>=2&&r<=4?"стола":"столов"},h=u=>new Date(u).toLocaleDateString("ru-RU",{day:"2-digit",month:"long",year:"numeric"});return(u,f)=>{const r=B,n=H,s=A,d=z,_=se;return $(),T("div",Ne,[e(_,{loading:m.loading,rows:5,animated:""},{default:t(()=>[m.events.length===0?($(),T("div",Ie,[e(n,{description:"Нет доступных мероприятий"},{default:t(()=>[e(r,{type:"primary"},{default:t(()=>f[0]||(f[0]=[p("Создать мероприятие")])),_:1,__:[0]})]),_:1})])):($(),T("div",Ye,[($(!0),T(P,null,J(m.events,i=>($(),T("div",{key:i.id,class:"event-item",onClick:k=>u.$emit("viewEvent",i)},[l("div",Fe,[l("div",Ae,[l("h4",qe,[p(g(i.name)+" ",1),e(s,{type:y(i.language),size:"small",class:"ml-2"},{default:t(()=>[p(g(w(i.language)),1)]),_:2},1032,["type"]),e(s,{type:V(i.status),size:"small",class:"ml-1"},{default:t(()=>[p(g(b(i.status)),1)]),_:2},1032,["type"]),e(s,{type:"info",size:"small",class:"ml-1"},{default:t(()=>[p(g(E(i.category)),1)]),_:2},1024)])]),l("p",Ge,g(i.description),1),l("div",Oe,[l("div",He,[e(s,{type:"primary",effect:"plain",round:""},{default:t(()=>[p(g(i.tables.length)+" "+g(a(i.tables.length)),1)]),_:2},1024),l("span",Pe,g(h(i.date)),1)]),l("div",Je,[e(r,{type:"danger",size:"small",circle:"",onClick:j(k=>u.$emit("deleteEvent",i.id),["stop"])},{default:t(()=>[e(d,null,{default:t(()=>[e(C(K))]),_:1})]),_:2},1032,["onClick"])])])])],8,je))),128))]))]),_:1},8,["loading"])])}}},Qe=R(Ke,[["__scopeId","data-v-6f25d982"]]),We={class:"archived-events"},Xe={key:0,class:"empty-state"},Ze={key:1,class:"archived-grid"},et={class:"card-header"},tt={class:"event-title"},nt={class:"event-date"},lt={class:"event-content"},at={class:"event-description"},st={class:"event-meta"},ot={class:"event-stats"},dt={class:"card-footer"},it={__name:"ArchivedEvents",props:{events:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["viewEvent","deleteEvent"],setup(m){const w=a=>({ru:"RU",en:"EN",am:"AM"})[a]||"RU",y=a=>({ru:"info",en:"success",am:"warning"})[a]||"info",b=a=>({funky:"Фанки",minicap:"Миникап",tournament:"Турнир",charity_tournament:"Благотворительный"})[a]||"Фанки",V=a=>{const h=Math.abs(a)%100;if(h>=5&&h<=20)return"столов";const u=h%10;return u===1?"стол":u>=2&&u<=4?"стола":"столов"},E=a=>new Date(a).toLocaleDateString("ru-RU",{day:"2-digit",month:"long",year:"numeric"});return(a,h)=>{const u=z,f=H,r=A,n=B,s=q,d=se;return $(),T("div",We,[e(d,{loading:m.loading,rows:3,animated:""},{default:t(()=>[m.events.length===0?($(),T("div",Xe,[e(f,{description:"Нет архивных мероприятий"},{image:t(()=>[e(u,{size:"100",color:"#c0c4cc"},{default:t(()=>[e(C(oe))]),_:1})]),_:1})])):($(),T("div",Ze,[($(!0),T(P,null,J(m.events,_=>($(),S(s,{key:_.id,class:"archived-card",shadow:"hover",onClick:i=>a.$emit("viewEvent",_)},{header:t(()=>[l("div",et,[l("h5",tt,[p(g(_.name)+" ",1),e(r,{type:y(_.language),size:"small",class:"ml-2"},{default:t(()=>[p(g(w(_.language)),1)]),_:2},1032,["type"])]),l("span",nt,g(E(_.date)),1)])]),footer:t(()=>[l("div",dt,[e(n,{type:"primary",size:"small",onClick:j(i=>a.$emit("viewEvent",_),["stop"])},{default:t(()=>[e(u,null,{default:t(()=>[e(C(Ve))]),_:1}),h[1]||(h[1]=p(" Детали "))]),_:2,__:[1]},1032,["onClick"]),e(n,{type:"danger",size:"small",onClick:j(i=>a.$emit("deleteEvent",_.id),["stop"])},{default:t(()=>[e(u,null,{default:t(()=>[e(C(K))]),_:1})]),_:2},1032,["onClick"])])]),default:t(()=>[l("div",lt,[l("p",at,g(_.description),1),l("div",st,[e(r,{type:"info",effect:"plain"},{default:t(()=>[p(g(b(_.category)),1)]),_:2},1024),e(r,{type:"info",effect:"plain"},{default:t(()=>h[0]||(h[0]=[p(" Завершено ")])),_:1,__:[0]})]),l("div",ot,[e(r,{type:"primary",effect:"plain",round:""},{default:t(()=>[p(g(_.tables.length)+" "+g(V(_.tables.length)),1)]),_:2},1024)])])]),_:2},1032,["onClick"]))),128))]))]),_:1},8,["loading"])])}}},ut=R(it,[["__scopeId","data-v-a6915e2a"]]),rt={__name:"EditTableDialog",props:{modelValue:Boolean,eventId:Number,table:Object},emits:["update:modelValue","table-updated"],setup(m,{emit:w}){const y=m,b=w,V=x(),E=x(!1),a=te({name:"",judge:"",seatingType:"free"}),h={name:[{required:!0,message:"Введите название стола",trigger:"blur"}]},u=Q({get:()=>y.modelValue,set:n=>b("update:modelValue",n)}),f=()=>{var n;u.value=!1,(n=V.value)==null||n.resetFields()},r=async()=>{if(V.value)try{await V.value.validate(),E.value=!0;const n={...a};await fe.updateTable(y.eventId,y.table.id,n),b("table-updated"),f()}catch(n){console.error("Ошибка обновления стола:",n),L.error("Ошибка при обновлении стола")}finally{E.value=!1}};return we(()=>y.table,n=>{n&&(a.name=n.name||"",a.judge=n.judge||"",a.seatingType=n.seatingType||"free")},{immediate:!0}),(n,s)=>{const d=O,_=le,i=ke,k=de,D=ae,U=B,v=ie;return $(),S(v,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=c=>u.value=c),title:"Редактировать стол",width:"500px","before-close":f},{footer:t(()=>[e(U,{onClick:f},{default:t(()=>s[6]||(s[6]=[p("Отмена")])),_:1,__:[6]}),e(U,{type:"primary",onClick:r,loading:E.value},{default:t(()=>s[7]||(s[7]=[p(" Сохранить изменения ")])),_:1,__:[7]},8,["loading"])]),default:t(()=>[e(D,{model:a,rules:h,ref_key:"formRef",ref:V,"label-width":"120px"},{default:t(()=>[e(_,{label:"Название",prop:"name"},{default:t(()=>[e(d,{modelValue:a.name,"onUpdate:modelValue":s[0]||(s[0]=c=>a.name=c),placeholder:"Например: Стол 1"},null,8,["modelValue"])]),_:1}),e(_,{label:"Судья",prop:"judge"},{default:t(()=>[e(d,{modelValue:a.judge,"onUpdate:modelValue":s[1]||(s[1]=c=>a.judge=c),placeholder:"Имя судьи"},null,8,["modelValue"])]),_:1}),e(_,{label:"Тип рассадки",prop:"seatingType"},{default:t(()=>[e(k,{modelValue:a.seatingType,"onUpdate:modelValue":s[2]||(s[2]=c=>a.seatingType=c)},{default:t(()=>[e(i,{value:"free"},{default:t(()=>s[4]||(s[4]=[p("Свободная рассадка")])),_:1,__:[4]}),e(i,{value:"fixed"},{default:t(()=>s[5]||(s[5]=[p("Заданная рассадка")])),_:1,__:[5]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},ct={class:"tables-grid"},mt={key:0,class:"no-tables"},_t={key:1,class:"tables-container"},vt={class:"table-header"},ft={class:"table-name"},pt={key:0,class:"table-actions"},gt={class:"table-content"},yt={class:"table-info"},bt={class:"info-row"},ht={key:0,class:"info-row"},Et={class:"info-value"},$t={class:"info-row"},Vt={class:"table-footer"},wt={__name:"TablesGrid",props:{tables:{type:Array,default:()=>[]},eventId:{type:Number,required:!0},readonly:{type:Boolean,default:!1}},emits:["table-updated","table-deleted"],setup(m,{emit:w}){const y=m,b=w,V=ue(),E=x(!1),a=x(null),h=s=>{const d=Math.abs(s)%100;if(d>=5&&d<=20)return"игр";const _=d%10;return _===1?"игра":_>=2&&_<=4?"игры":"игр"},u=s=>{a.value=s,E.value=!0},f=async s=>{try{await W.confirm("Вы уверены, что хотите удалить этот стол?","Подтверждение",{confirmButtonText:"Да",cancelButtonText:"Отмена",type:"warning"}),await fe.deleteTable(y.eventId,s),b("table-deleted",s),L.success("Стол удален!")}catch(d){d!=="cancel"&&L.error("Ошибка при удалении стола")}},r=s=>{V.push(`/event/${y.eventId}?table=${s.id}`)},n=()=>{b("table-updated"),E.value=!1,L.success("Стол обновлен!")};return(s,d)=>{const _=H,i=z,k=B,D=A,U=q;return $(),T("div",ct,[m.tables.length===0?($(),T("div",mt,[e(_,{description:"У этого мероприятия еще нет столов"})])):($(),T("div",_t,[($(!0),T(P,null,J(m.tables,v=>($(),S(U,{key:v.id,class:"table-card",shadow:"hover"},{header:t(()=>[l("div",vt,[l("h6",ft,g(v.name),1),m.readonly?F("",!0):($(),T("div",pt,[e(k,{type:"primary",size:"small",circle:"",onClick:c=>u(v)},{default:t(()=>[e(i,null,{default:t(()=>[e(C(Ce))]),_:1})]),_:2},1032,["onClick"]),e(k,{type:"danger",size:"small",circle:"",onClick:c=>f(v.id)},{default:t(()=>[e(i,null,{default:t(()=>[e(C(K))]),_:1})]),_:2},1032,["onClick"])]))])]),default:t(()=>[l("div",gt,[l("div",yt,[l("div",bt,[d[1]||(d[1]=l("span",{class:"info-label"},"Тип рассадки:",-1)),e(D,{type:v.seatingType==="free"?"success":"primary",size:"small"},{default:t(()=>[p(g(v.seatingType==="free"?"Свободная":"Заданная"),1)]),_:2},1032,["type"])]),v.judge?($(),T("div",ht,[d[2]||(d[2]=l("span",{class:"info-label"},"Судья:",-1)),l("span",Et,g(v.judge),1)])):F("",!0),l("div",$t,[d[3]||(d[3]=l("span",{class:"info-label"},"Игры:",-1)),e(D,{type:"info",size:"small"},{default:t(()=>{var c,o;return[p(g(((c=v.games)==null?void 0:c.length)||0)+" "+g(h(((o=v.games)==null?void 0:o.length)||0)),1)]}),_:2},1024)])]),l("div",Vt,[e(k,{type:"primary",size:"small",onClick:c=>r(v),style:{width:"100%"}},{default:t(()=>[e(i,null,{default:t(()=>[e(C(Te))]),_:1}),d[4]||(d[4]=p(" Открыть стол "))]),_:2,__:[4]},1032,["onClick"])])])]),_:2},1024))),128))])),e(rt,{modelValue:E.value,"onUpdate:modelValue":d[0]||(d[0]=v=>E.value=v),"event-id":m.eventId,table:a.value,onTableUpdated:n},null,8,["modelValue","event-id","table"])])}}},kt=R(wt,[["__scopeId","data-v-2a243d1d"]]),Tt={key:0,class:"event-details"},Ct={class:"event-badges mb-3"},Dt={class:"info-item"},Ut={class:"info-value"},Lt={class:"info-item"},xt={class:"info-value"},Mt={class:"info-item"},St={class:"info-value"},Bt={class:"status-controls mb-4"},Rt={class:"tables-section"},zt={class:"section-header"},Nt={class:"dialog-footer"},It={__name:"EventDetailsDialog",props:{modelValue:Boolean,event:Object},emits:["update:modelValue","updateEvent","deleteEvent"],setup(m,{emit:w}){const y=m,b=w,V=ue(),E=x(!1),a=Q({get:()=>y.modelValue,set:c=>b("update:modelValue",c)}),h=c=>({planned:"В планах",active:"Активно",completed:"Завершено"})[c]||"Неизвестно",u=c=>({planned:"",active:"success",completed:"info"})[c]||"",f=c=>({funky:"Фанки",minicap:"Миникап",tournament:"Турнир",charity_tournament:"Благотворительный"})[c]||"Фанки",r=c=>({ru:"Русский",en:"English",am:"Հայերեն"})[c]||"Русский",n=c=>{const o=Math.abs(c)%100;if(o>=5&&o<=20)return"столов";const M=o%10;return M===1?"стол":M>=2&&M<=4?"стола":"столов"},s=c=>new Date(c).toLocaleDateString("ru-RU",{day:"2-digit",month:"long",year:"numeric"}),d=()=>{a.value=!1},_=async c=>{if(c==="completed")try{await W.confirm("Вы уверены, что хотите завершить мероприятие? После завершения нельзя будет добавлять столы и игры.","Подтверждение",{confirmButtonText:"Да",cancelButtonText:"Отмена",type:"warning"})}catch{return}b("updateEvent",y.event.id,{status:c})},i=c=>{L.success("Стол успешно создан!"),E.value=!1,b("updateEvent",y.event.id,{})},k=()=>{b("updateEvent",y.event.id,{})},D=()=>{b("updateEvent",y.event.id,{})},U=()=>{V.push(`/event/${y.event.id}`),d()},v=()=>{b("deleteEvent",y.event.id)};return(c,o)=>{var Z;const M=A,X=ce,N=z,pe=q,ge=re,G=Le,ye=de,I=B,be=ie;return $(),S(be,{modelValue:a.value,"onUpdate:modelValue":o[2]||(o[2]=Y=>a.value=Y),title:((Z=m.event)==null?void 0:Z.name)||"Детали мероприятия",width:"80%","before-close":d},{footer:t(()=>[l("div",Nt,[e(I,{onClick:d},{default:t(()=>o[13]||(o[13]=[p("Закрыть")])),_:1,__:[13]}),e(I,{type:"primary",onClick:U},{default:t(()=>o[14]||(o[14]=[p(" Перейти к мероприятию ")])),_:1,__:[14]}),e(I,{type:"danger",onClick:v},{default:t(()=>o[15]||(o[15]=[p(" Удалить мероприятие ")])),_:1,__:[15]})])]),default:t(()=>{var Y;return[m.event?($(),T("div",Tt,[e(ge,{gutter:20,class:"mb-4"},{default:t(()=>[e(X,{md:16},{default:t(()=>[l("div",Ct,[e(M,{type:u(m.event.status),class:"mr-2"},{default:t(()=>[p(g(h(m.event.status)),1)]),_:1},8,["type"]),e(M,{type:"info"},{default:t(()=>[p(g(f(m.event.category)),1)]),_:1})]),o[3]||(o[3]=l("h6",{class:"section-title"},"Описание:",-1)),l("p",null,g(m.event.description||"Описание отсутствует"),1)]),_:1,__:[3]}),e(X,{md:8},{default:t(()=>[e(pe,{class:"info-card"},{default:t(()=>[l("div",Dt,[e(N,null,{default:t(()=>[e(C(me))]),_:1}),l("div",null,[o[4]||(o[4]=l("div",{class:"info-label"},"Дата проведения",-1)),l("div",Ut,g(s(m.event.date)),1)])]),l("div",Lt,[e(N,null,{default:t(()=>[e(C(De))]),_:1}),l("div",null,[o[5]||(o[5]=l("div",{class:"info-label"},"Язык",-1)),l("div",xt,g(r(m.event.language)),1)])]),l("div",Mt,[e(N,null,{default:t(()=>[e(C(Ue))]),_:1}),l("div",null,[o[6]||(o[6]=l("div",{class:"info-label"},"Столы",-1)),l("div",St,g(m.event.tables.length)+" "+g(n(m.event.tables.length)),1)])])]),_:1})]),_:1})]),_:1}),l("div",Bt,[o[10]||(o[10]=l("h6",{class:"section-title"},"Статус мероприятия:",-1)),e(ye,{"model-value":m.event.status,onChange:_},{default:t(()=>[e(G,{value:"planned"},{default:t(()=>o[7]||(o[7]=[p("В планах")])),_:1,__:[7]}),e(G,{value:"active"},{default:t(()=>o[8]||(o[8]=[p("Активно")])),_:1,__:[8]}),e(G,{value:"completed"},{default:t(()=>o[9]||(o[9]=[p("Завершено")])),_:1,__:[9]})]),_:1},8,["model-value"])]),l("div",Rt,[l("div",zt,[o[12]||(o[12]=l("h6",{class:"section-title"},"Игровые столы",-1)),m.event.status!=="completed"?($(),S(I,{key:0,type:"primary",size:"small",onClick:o[0]||(o[0]=ee=>E.value=!0)},{default:t(()=>[e(N,null,{default:t(()=>[e(C(_e))]),_:1}),o[11]||(o[11]=p(" Добавить стол "))]),_:1,__:[11]})):F("",!0)]),e(kt,{tables:m.event.tables,"event-id":m.event.id,readonly:m.event.status==="completed",onTableUpdated:k,onTableDeleted:D},null,8,["tables","event-id","readonly"])])])):F("",!0),e(Re,{modelValue:E.value,"onUpdate:modelValue":o[1]||(o[1]=ee=>E.value=ee),"event-id":(Y=m.event)==null?void 0:Y.id,onTableCreated:i},null,8,["modelValue","event-id"])]}),_:1},8,["modelValue","title"])}}},Yt=R(It,[["__scopeId","data-v-cd944201"]]),jt={class:"events-view"},Ft={class:"card-header"},At={class:"card-header"},qt={class:"card-header"},Gt={__name:"EventsView",setup(m){const w=ve(),y=x(""),b=x(!1),V=x(null),E=Q(()=>{if(!y.value)return w.activeEvents;const r=y.value.toLowerCase();return w.activeEvents.filter(n=>n.name.toLowerCase().includes(r)||n.description&&n.description.toLowerCase().includes(r))}),a=r=>{L.success("Мероприятие успешно создано!")},h=r=>{V.value=r,b.value=!0},u=async(r,n)=>{try{await w.updateEvent(r,n),L.success("Мероприятие обновлено!")}catch{L.error("Ошибка обновления мероприятия")}},f=async r=>{var n;try{await W.confirm("Вы уверены, что хотите удалить это мероприятие?","Подтверждение",{confirmButtonText:"Да",cancelButtonText:"Отмена",type:"warning"}),await w.deleteEvent(r),L.success("Мероприятие удалено!"),((n=V.value)==null?void 0:n.id)===r&&(b.value=!1)}catch(s){s!=="cancel"&&L.error("Ошибка удаления мероприятия")}};return ne(async()=>{try{await w.loadEvents()}catch{L.error("Ошибка загрузки данных")}}),(r,n)=>{const s=xe,d=z,_=q,i=ce,k=O,D=re,U=Me,v=Be;return $(),T("div",jt,[e(v,null,{default:t(()=>[e(s,null,{default:t(()=>n[2]||(n[2]=[l("div",{class:"header-content"},[l("h1",null,"Мероприятия Мафии")],-1)])),_:1,__:[2]}),e(U,null,{default:t(()=>[e(D,{gutter:20},{default:t(()=>[e(i,{lg:10,md:12,sm:24},{default:t(()=>[e(_,null,{header:t(()=>[l("div",Ft,[e(d,null,{default:t(()=>[e(C(_e))]),_:1}),n[3]||(n[3]=l("span",null,"Создать новое мероприятие",-1))])]),default:t(()=>[e(ze,{onEventCreated:a})]),_:1})]),_:1}),e(i,{lg:14,md:12,sm:24},{default:t(()=>[e(_,null,{header:t(()=>[l("div",At,[e(d,null,{default:t(()=>[e(C(me))]),_:1}),n[4]||(n[4]=l("span",null,"Активные мероприятия",-1)),e(k,{modelValue:y.value,"onUpdate:modelValue":n[0]||(n[0]=c=>y.value=c),placeholder:"Поиск...",size:"small",style:{width:"200px"},clearable:""},{prefix:t(()=>[e(d,null,{default:t(()=>[e(C(Se))]),_:1})]),_:1},8,["modelValue"])])]),default:t(()=>[e(Qe,{events:E.value,loading:C(w).loading,onViewEvent:h,onDeleteEvent:f},null,8,["events","loading"])]),_:1})]),_:1})]),_:1}),e(_,{class:"mt-4"},{header:t(()=>[l("div",qt,[e(d,null,{default:t(()=>[e(C(oe))]),_:1}),n[5]||(n[5]=l("span",null,"Архив мероприятий",-1))])]),default:t(()=>[e(ut,{events:C(w).archivedEvents,onViewEvent:h,onDeleteEvent:f},null,8,["events"])]),_:1})]),_:1})]),_:1}),e(Yt,{modelValue:b.value,"onUpdate:modelValue":n[1]||(n[1]=c=>b.value=c),event:V.value,onUpdateEvent:u,onDeleteEvent:f},null,8,["modelValue","event"])])}}},Kt=R(Gt,[["__scopeId","data-v-21d25bfa"]]);export{Kt as default};
